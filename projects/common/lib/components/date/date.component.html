<fieldset>
  <legend class="date--legend">{{label}} - TEST</legend>
  <div class="date-row">

    <label class="visuallyhidden" for="{{monthLabelforId}}">Month</label>
    <select class="form-control monthSelect"
            id="{{monthLabelforId}}"
            name="{{monthLabelforId}}"
            [value]="_month"
            (change)="setMonth($event.target.value)"
            (blur)="onBlurMonth()"
            [disabled]='disabled'>
      <!-- We show the blank option so the user can clear out their data.-->
      <!-- <option value="null" label="-- month --" selected [disabled]='required'></option> -->
      <!-- problem - toggling of the 'disabled' input here based on [required]? -->
      <option value="null" label="-- month --" selected disabled></option>
      <option *ngFor="let month of monthList; let i = index;" [value]="i">{{month}}</option>
    </select>

    <label class="visuallyhidden" for="{{dayLabelforId}}">Day</label>
    <input type="number"
           class="form-control dayInput"
           id="{{dayLabelforId}}"
           name="{{dayLabelforId}}"
           placeholder="Day"
           [value]="_day"
           (change)="setDay($event.target.value)"
           (blur)="onBlurDay()"
           commonDateFieldFormat
           [disabled]='disabled'
           maxlength="2"
           autocomplete="off"/>

    <label class="visuallyhidden" for="{{yearLabelforId}}">Year</label>
    <input type="number"
           class="form-control yearInput"
           id="{{yearLabelforId}}"
           name="{{yearLabelforId}}"
           placeholder="Year"
           [value]="_year"
           (change)="setYear($event.target.value)"
           (blur)="onBlurYear()"
           commonDateFieldFormat
           [disabled]='disabled'
           maxlength="4"
           autocomplete="off"/>

  </div>
</fieldset>

<!-- Error messages for component -->
<!-- TODO: Remove messages to self in here -->
<!-- TODO: Only show errors when all inputs are touched OR controldir touched. -->
<!-- FIXME: Problem is now it shows 'Required' error after just touching first input. -->
<!-- Change from controlDir to use the inputs? -->
<!-- [displayError]="!disabled && (monthRef.touched || monthRef.dirty) && (dayRef.touched || dayRef.dirty) && (yearRef.touched || yearRef.dirty)"> -->
<common-error-container
    [displayError]="!disabled && (controlDir?.touched || controlDir?.dirty)">
  <div *ngIf="controlDir?.errors?.required">
      <!-- ARC: Converted to ControlDir as it's top-level -->
      {{defaultErrMsg.required}}
  </div>
  <div *ngIf="controlDir?.errors?.dayOutOfRange">
      <!-- TODO: Convert to Internal Validator function, use controlDir -->
      {{defaultErrMsg.dayOutOfRange}}
  </div>
  <div *ngIf="controlDir?.errors?.yearDistantPast">
        <!-- TODO: Decide if internal validator or going to base off Date() -->
      <!-- TODO: Convert to Internal Validator function, use controlDir (@Input() w/ default as threshold?) -->
      <!-- TODO: Alternatively, have this be an exportable validator off of Date? -->
      {{defaultErrMsg.yearDistantPast}}
  </div>
  <div *ngIf="controlDir?.errors?.yearDistantFuture">
      <!-- TODO: Decide if internal validator or going to base off Date() -->
      {{defaultErrMsg.yearDistantFuture}}
  </div>
  <div *ngIf="controlDir?.errors?.noPastDatesAllowed">
        {{defaultErrMsg.noPastDatesAllowed}}
  </div>
  <div *ngIf="controlDir?.errors?.noFutureDatesAllowed">
      {{defaultErrMsg.noFutureDatesAllowed}}
  </div>
  <!-- TODO: Add "dateOutOfRange -> pass in two dates, must be between" -->
  
  <!-- TODO: Add "dateOutOfRangeAfter" -->

  <!-- Case should not happen until something is not formatted correctly-->
  <!-- <div *ngIf="(dayRef?.errors?.invalidValue || yearRef?.errors?.invalidValue)"> -->
  <div *ngIf="controlDir?.errors?.invalidValue">
      {{defaultErrMsg.invalidValue}}
  </div>
</common-error-container>
