<fieldset>
  <legend class="date--legend">{{label}}</legend>
  <div class="date-row">

    <label class="visuallyhidden" for="{{monthLabelforId}}">Month</label>
    <select class="form-control monthSelect"
            id="{{monthLabelforId}}"
            name="{{monthLabelforId}}"
            [value]="month"
            (change)="setMonth($event)"
            [disabled]='disabled'
            #monthRef="ngModel"
            ngModel
            [required]="required">
      <!-- We show the blank option so the user can clear out their data.-->
      <option value="null" label="-- month --" selected [disabled]='required'></option>
      <option *ngFor="let month of monthList; let i = index;" [value]="i">{{month}}</option>
    </select>

    <label class="visuallyhidden" for="{{dayLabelforId}}">Day</label>
    <input type="number"
           class="form-control dayInput"
           id="{{dayLabelforId}}"
           name="{{dayLabelforId}}"
           placeholder="Day"
           [value]="day"
           (change)="setDay($event)"
           #dayRef="ngModel"
           ngModel
           [required]="required"
           commonDateFieldFormat
           commonDayValidation
           [selectedMonth]='monthRef.value'
           [selectedYear]='yearRef.value'
           [disabled]='disabled'
           maxlength="2"
           autocomplete="off"/>

    <label class="visuallyhidden" for="{{yearLabelforId}}">Year</label>
    <input type="number"
           class="form-control yearInput"
           id="{{yearLabelforId}}"
           name="{{yearLabelforId}}"
           placeholder="Year"
           [value]="year"
           (change)="setYear($event)"
           #yearRef="ngModel"
           ngModel
           [required]="required"
           commonDateFieldFormat
           [commonYearValidate]="restrictDate"
           [selectedMonth]='monthRef.value'
           [selectedDay]='dayRef.value'
           [disabled]='disabled'
           maxlength="4"
           autocomplete="off"/>

  </div>
</fieldset>

<!-- Error messages for component -->
<common-error-container
    [displayError]="!disabled && (monthRef.touched || monthRef.dirty) && (dayRef.touched || dayRef.dirty) && (yearRef.touched || yearRef.dirty)">
  <div *ngIf="(monthRef?.errors?.required || dayRef?.errors?.required || yearRef?.errors?.required )">
      {{defaultErrMsg.required}}
  </div>
  <div *ngIf="dayRef?.errors?.dayOutOfRange">
      {{defaultErrMsg.dayOutOfRange}}
  </div>
  <div *ngIf="yearRef?.errors?.yearDistantPast">
      {{defaultErrMsg.yearDistantPast}}
  </div>
  <div *ngIf="yearRef?.errors?.yearDistantFuture">
      {{defaultErrMsg.yearDistantFuture}}
  </div>
  <div *ngIf="yearRef?.errors?.noPastDatesAllowed">
        {{defaultErrMsg.noPastDatesAllowed}}
  </div>
  <div *ngIf="yearRef?.errors?.noFutureDatesAllowed">
      {{defaultErrMsg.noFutureDatesAllowed}}
  </div>
  <!-- Case should not happen until something is not formatted correctly-->
  <div *ngIf="(dayRef?.errors?.invalidValue || yearRef?.errors?.invalidValue)">
      {{defaultErrMsg.invalidValue}}
  </div>
</common-error-container>
